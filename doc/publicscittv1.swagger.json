{
  "swagger": "2.0",
  "info": {
    "title": "Archivist externally facing API",
    "version": "version not set"
  },
  "tags": [],
  "basePath": "/archivist/v1/publicscitt",
  "paths": {
    "/archivist/v1/publicscitt/entries": {
      "post": {
        "summary": "Register a Signed Statement",
        "description": "Register a Signed Statement.",
        "operationId": "PublicSCITT_RegisterSignedStatement",
        "consumes": [
          "multipart/form-data"
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1RegisterSignedStatementResponse"
            }
          },
          "201": {
            "description": "Returned when the registration is successful."
          },
          "202": {
            "description": "Returned when the registration is running."
          },
          "400": {
            "description": "Returned when registration was unsuccessful due to invalid input."
          }
        },
        "parameters": [
          {
            "name": "body",
            "description": "cbor encoded signed statement",
            "in": "formData",
            "type": "file",
            "required": true
          }
        ],
        "tags": [
          "SCITT (Beta)"
        ]
      }
    },
    "/archivist/v1/publicscitt/operations/{operationID}": {
      "get": {
        "summary": "Get Operation Status",
        "description": "Get Operation Status of registering a Signed Statement.",
        "operationId": "PublicSCITT_RetrieveOperationStatus",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "responses": {
          "200": {
            "description": "Returned when the operational status can be retrieved.",
            "schema": {
              "$ref": "#/definitions/v1RetrieveOperationStatusResponse"
            }
          },
          "404": {
            "description": "Returned when the operationID is unknown."
          }
        },
        "parameters": [
          {
            "name": "operationID",
            "description": "The ID of the Signed Statement Registration Operation",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "SCITT (Beta)"
        ]
      }
    },
    "/archivist/v1/publicscitt/entries/{entryID}": {
      "get": {
        "summary": "Get Signed Statement",
        "description": "Get Signed Statement countersigned by DataTrails.",
        "operationId": "PublicSCITT_RetrieveSignedStatement",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/cbor"
        ],
        "responses": {
          "200": {
            "description": "Returned when the signed statement can be retrieved.",
            "schema": {
              "type": "file"
            }
          },
          "404": {
            "description": "Returned when the entryID is unknown."
          }
        },
        "parameters": [
          {
            "name": "entryID",
            "description": "The entry ID of the registered Signed Statement",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "SCITT (Beta)"
        ]
      }
    },
    "/archivist/v1/publicscitt/entries/{entryID}/receipt": {
      "get": {
        "summary": "Get Registration Receipt",
        "description": "Get Registration Receipt.",
        "operationId": "PublicSCITT_RetrieveRegistrationReceipt",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/cbor"
        ],
        "responses": {
          "200": {
            "description": "Returned when the registration receipt can be retrieved.",
            "schema": {
              "type": "file"
            }
          },
          "404": {
            "description": "Returned when the entryID is unknown."
          }
        },
        "parameters": [
          {
            "name": "entryID",
            "description": "The entry ID of the registered Signed Statement",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "SCITT (Beta)"
        ]
      }
    }
  },
  "definitions": {
    "v1Error": {
      "type": "object",
      "example": {
        "type": "urn:ietf:params:scitt:error:badSignatureAlgorithm",
        "detail": "The Statement was signed with an algorithm the server does not support"
      },
      "properties": {
        "type": {
          "type": "string",
          "description": "The type of error within the URN namespace of: \"urn:ietf:params:scitt:error:\""
        },
        "detail": {
          "type": "string",
          "description": "A human-readable string describing the error that prevented the Transparency Service from processing the request"
        }
      },
      "description": "The Error causing a register Signed Statement operation to fail."
    },
    "v1RegisterSignedStatementResponse": {
      "type": "object",
      "example": {
        "operationID": "event_4f46ed83-0b96-4a63-94f6-455fc4509671",
        "status": "running"
      },
      "properties": {
        "operationID": {
          "type": "string",
          "description": "The ID of the Signed Statement Registration Operation",
          "readOnly": true
        },
        "status": {
          "$ref": "#/definitions/v1RegistrationStatus",
          "description": "The status of the Signed Statement Registration Operation",
          "readOnly": true
        }
      },
      "description": "The Registration Status of the Signed Statement."
    },
    "v1RegistrationStatus": {
      "type": "string",
      "enum": [
        "REGISTRATION_STATUS_UNSPECIFIED",
        "running",
        "succeeded",
        "failed"
      ],
      "default": "REGISTRATION_STATUS_UNSPECIFIED",
      "title": "- running: signed statement in the process of being registered\n - succeeded: signed statement has been registered\n - failed: failed to register signed statement"
    },
    "v1RetrieveOperationStatusResponse": {
      "type": "object",
      "example": {
        "operationID": "event_4f46ed83-0b96-4a63-94f6-455fc4509671",
        "status": "succeeded",
        "entryID": "0xe6f9314637583446fed36016ebd2df8f832d4f4290a7803f6558d21c16ebc69c"
      },
      "properties": {
        "operationID": {
          "type": "string",
          "description": "The ID of the Signed Statement Registration Operation",
          "readOnly": true
        },
        "status": {
          "$ref": "#/definitions/v1RegistrationStatus",
          "description": "The status of the Signed Statement Registration Operation",
          "readOnly": true
        },
        "entryID": {
          "type": "string",
          "description": "The entry ID of the registered Signed Statement",
          "readOnly": true
        },
        "error": {
          "$ref": "#/definitions/v1Error",
          "description": "Error explaining why the operation to register a Signed Statement failed",
          "readOnly": true
        }
      },
      "description": "The Registration Status of the Signed Statement."
    }
  }
}
