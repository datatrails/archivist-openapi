{
  "swagger": "2.0",
  "info": {
    "title": "ArchivistNode API",
    "description": "API to manage an archivist node.",
    "version": "1.0",
    "contact": {
      "name": "RKVST",
      "url": "https://www.rkvst.com"
    }
  },
  "tags": [
    {
      "name": "ArchivistNode",
      "description": "Query the ArchivistNode you're connected to"
    }
  ],
  "basePath": "/_api",
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/archivist/v1/archivistnode": {
      "get": {
        "summary": "Get information about an archivist node",
        "description": "Returns the identified archivist node",
        "operationId": "ArchivistNode_GetArchivistNode",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ArchivistNodes"
            }
          },
          "401": {
            "description": "Returned when the user is not authenticated to the system."
          },
          "403": {
            "description": "Returned when the user is not authorized to read the archivist node's information"
          },
          "404": {
            "description": "Returned when the identified archivist node does not exist"
          },
          "429": {
            "description": "Returned when a user exceeds their subscription's rate limit for requests."
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ArchivistNode"
        ]
      }
    },
    "/archivist/v1/archivistnode:openapi": {
      "get": {
        "summary": "Get OpenAPI spec for Archivistnode",
        "description": "Get OpenAPI v2.0 spec for Archivistnode",
        "operationId": "Archivistnode_GetOpenAPI",
        "responses": {
          "200": {
            "description": "A successful response."
          },
          "401": {
            "description": "Returned when the user is not authenticated to the system."
          },
          "429": {
            "description": "Returned when a user exceeds their subscription's rate limit for requests."
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ArchivistNode"
        ]
      }
    },
    "/archivist/v1/archivistnode:openapi-ui": {
      "get": {
        "summary": "Get OpenAPI html for Archivistnode",
        "description": "Get OpenAPI v2.0 html for Archivistnode",
        "operationId": "Archivistnode_GetOpenAPIUI",
        "responses": {
          "200": {
            "description": "A successful response."
          },
          "401": {
            "description": "Returned when the user is not authenticated to the system."
          },
          "429": {
            "description": "Returned when a user exceeds their subscription's rate limit for requests."
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "ArchivistNode"
        ]
      }
    }
  },
  "definitions": {
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1ArchivistNodes": {
      "type": "object",
      "example": {
        "identity": "quorum-0",
        "blockchain_nodes": [
          {
            "validator_pubkey": {
              "kty": "EC",
              "crv": "P-256K",
              "x": "VBKHictTWJC-3sqknXCb8MI4IxTc3c_My7lnem2C74E=",
              "y": "ItNeb5d-6vEHkvtUOcDYrEADxsZXeOCJm18pQWntenE=",
              "d": ""
            },
            "block_height": "38773",
            "connection_status": "REACHABLE",
            "syncing": null,
            "genesis_hash": "0x1b526bd9c7f9bf7c43ba91ad07e5530eb7ceedf390396f9fbfeb68722e097e95",
            "state_root": "0x9606fc44a382938703678ac90581ab1260c9efd20ea8c7f90c87852bc982f3a7",
            "timestamp_committed": "2019-01-01T12:00:27Z",
            "timestamp_created": "2019-01-01T12:00:27Z",
            "peers": [
              {
                "validator_pubkey": {
                  "kty": "EC",
                  "crv": "P-256K",
                  "x": "o0uZ8ix5DE42srPCw1o22wYibkHGkvyCuLVqwcVAxb0=",
                  "y": "W43sUjWg-ociR2x3CcAlWeOqc6oDkYui1JLup1q-ojU=",
                  "d": ""
                },
                "connection_status": "REACHABLE"
              },
              {
                "validator_pubkey": {
                  "kty": "EC",
                  "crv": "P-256K",
                  "x": "5HcU1PJgTe0LGyGxKFrIPFZWdTbxPySfi6bKxdQeO8A=",
                  "y": "dEpMURyTwEGzpgIgLdm4Csl1BgF6H39tb1Kf8wLLhVI=",
                  "d": ""
                },
                "connection_status": "REACHABLE"
              }
            ]
          }
        ]
      },
      "properties": {
        "identity": {
          "type": "string",
          "description": "The identity of the archivistnode blockchain",
          "readOnly": true
        },
        "blockchain_nodes": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1BlockchainNode"
          },
          "description": "Status information for the blockchain nodes belonging to this  archivist node. Each blockchain node further contains information  about any connected peers. Note that the peer lists for each blockchain  node will often overlap",
          "readOnly": true
        }
      },
      "description": "Describes the status of the archivist node."
    },
    "v1BlockchainNode": {
      "type": "object",
      "properties": {
        "validator_pubkey": {
          "$ref": "#/definitions/v1JSONWebKey",
          "description": "Blockchain node Public key, used to validate transactions. A  Secp256k1 public key. Formatted as  a JWK accodring to RFC 7517 (JWK), RFC 7518 (JWA) and  draft-ietf-cose-webauthn-algorithms-00. Note in particular,  that x, y are the base64url encoding of the uncompressed key.",
          "readOnly": true
        },
        "block_height": {
          "type": "string",
          "format": "uint64",
          "description": "For the local node, the height of the last committed block",
          "readOnly": true
        },
        "connection_status": {
          "$ref": "#/definitions/v1ConnectionStatus",
          "description": "An indication of the nodes connection status.",
          "title": "Status of the connection to this blockchain node",
          "readOnly": true
        },
        "timestamp_committed": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when consensus was achieved for the block at `block_height` (RFC 3339) obtained from the block info of the 'latest' block.",
          "title": "The timestamp when the ledger committed the block at block_height",
          "readOnly": true
        },
        "timestamp_created": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of creation of the genesis block (RFC 3339)",
          "title": "The timestamp when the ledger was created i.e. the timestamp of the genesis block",
          "readOnly": true
        },
        "syncStatus": {
          "$ref": "#/definitions/v1SyncStatus",
          "description": "IF present, the node is syncing.",
          "readOnly": true
        },
        "peers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1PeerBlockchainNode"
          },
          "description": "List of peer blockchain nodes. ",
          "readOnly": true
        },
        "genesis_hash": {
          "type": "string",
          "description": "HASH of genesis block.",
          "readOnly": true
        },
        "state_root": {
          "type": "string",
          "description": "state root of genesis block.",
          "readOnly": true
        }
      }
    },
    "v1ConnectionStatus": {
      "type": "string",
      "enum": [
        "UNSPECIFIED",
        "REACHABLE",
        "UNREACHABLE"
      ],
      "default": "UNSPECIFIED"
    },
    "v1JSONWebKey": {
      "type": "object",
      "properties": {
        "keyEC": {
          "$ref": "#/definitions/v1JSONWebKeyEC"
        }
      }
    },
    "v1JSONWebKeyEC": {
      "type": "object",
      "example": {
        "kty": "EC",
        "crv": "P-256K",
        "x": "VBKHictTWJC-3sqknXCb8MI4IxTc3c_My7lnem2C74E=",
        "y": "ItNeb5d-6vEHkvtUOcDYrEADxsZXeOCJm18pQWntenE=",
        "d": ""
      },
      "properties": {
        "kty": {
          "$ref": "#/definitions/v1JSONWebKeyType",
          "description": "The type of the key. MUST be 'EC'",
          "title": "Must be \"EC\""
        },
        "crv": {
          "type": "string",
          "description": "The curve name for the key.  6.2.1.1 rfc 7518, 3.1 draft-ietf-cose-webauthn-algorithms-00 MUST be one of P-256K, P-256, P-384, P-521",
          "title": "CurveName crv = 2 [ (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {",
          "maxLength": 64
        },
        "x": {
          "type": "string",
          "description": "The base64url encoding of the x component for the uncompressed point. 6.2.1.2 rfc 7518",
          "maxLength": 256
        },
        "y": {
          "type": "string",
          "description": "The base64url encoding of the y component the uncompressed point 6.2.1.3 rfc 7518",
          "maxLength": 256
        },
        "d": {
          "type": "string",
          "description": "Present only for PRIVATE keys. The base64url encoding of the private  key 6.2.2.1 rfc 7518",
          "maxLength": 2048
        }
      },
      "description": "A public or private Elliptic Curve Key according to RFC 7518. As an extension, we permit the crv value P-256K1 to indicate  the SEC2 P-256K1 aka Secp256k1 curve is used.  See draft-ietf-cose-webauthn-algorithms-00, and  http://www.secg.org/sec2-v2.pdf"
    },
    "v1JSONWebKeyType": {
      "type": "string",
      "enum": [
        "UNSPECIFIED",
        "EC",
        "RSA",
        "OCT"
      ],
      "default": "UNSPECIFIED",
      "title": "JSONWebKey.Type The key types declared in 6.1 rfc-7518"
    },
    "v1PeerBlockchainNode": {
      "type": "object",
      "properties": {
        "validator_pubkey": {
          "$ref": "#/definitions/v1JSONWebKey",
          "description": "The Blockchain node Public key, used to validate transactions.  A Secp256k1 public key. Formatted as  a JWK accodring to RFC 7517 (JWK), RFC 7518 (JWA) and  draft-ietf-cose-webauthn-algorithms-00. Note in particular,  that x, y are the base64url encoding of the uncompressed key.",
          "readOnly": true
        },
        "connection_status": {
          "$ref": "#/definitions/v1ConnectionStatus",
          "description": "An indication of the peers connection status.",
          "readOnly": true
        }
      }
    },
    "v1SyncStatus": {
      "type": "object",
      "properties": {
        "starting_block": {
          "type": "string",
          "format": "uint64",
          "description": "When syncing, the starting block.",
          "readOnly": true
        },
        "current_block": {
          "type": "string",
          "format": "uint64",
          "description": "When syncing, the current block.",
          "readOnly": true
        },
        "highest_block": {
          "type": "string",
          "format": "uint64",
          "description": "When syncing, the highest block.",
          "readOnly": true
        }
      }
    }
  }
}
